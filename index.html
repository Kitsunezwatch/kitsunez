<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitsunez - –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <link rel="icon" type="image/x-icon" href="https://i.ibb.co/Sht7vLz/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #ff5e00;
            --secondary-color: #8a2be2;
            --dark-bg: #0f0f0f;
            --medium-bg: #1a1a1a;
            --light-bg: #2a2a2a;
            --text-color: #fff;
            --text-secondary: #ddd;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* –®–∞–ø–∫–∞ */
        header {
            background: var(--dark-bg);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid var(--light-bg);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-text {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-icon {
            font-size: 24px;
            color: var(--primary-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            padding: 5px 0;
            cursor: pointer;
            font-size: 16px;
        }
        
        nav a:hover, nav a.active {
            color: var(--primary-color);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: var(--transition);
        }
        
        nav a:hover::after, nav a.active::after {
            width: 100%;
        }
        
        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .search-box {
            display: flex;
            background: var(--light-bg);
            border-radius: 20px;
            overflow: hidden;
        }
        
        .search-box input {
            background: transparent;
            border: none;
            padding: 10px 15px;
            color: var(--text-color);
            width: 200px;
            outline: none;
            font-size: 14px;
        }
        
        .search-box input::placeholder {
            color: #bbb;
        }
        
        .search-box button {
            background: var(--primary-color);
            border: none;
            padding: 10px 15px;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }
        
        .search-box button:hover {
            background: var(--secondary-color);
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-weight: 700;
            transition: var(--transition);
            font-size: 14px;
        }
        
        .btn-login {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-login:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-register {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-register:hover {
            background: var(--secondary-color);
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
        .btn-fullscreen {
            background: transparent;
            color: var(--text-secondary);
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 8px 12px;
            border-radius: 50%;
        }
        
        .btn-fullscreen:hover {
            color: var(--primary-color);
            background: rgba(255, 94, 0, 0.1);
        }
        
        /* –ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–Ω–µ—Ä */
        .hero {
            position: relative;
            height: 500px;
            overflow: hidden;
            margin-bottom: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .hero-banner {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.4);
            z-index: -1;
        }
        
        .hero-content {
            padding: 40px;
            max-width: 800px;
        }
        
        .hero-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-color);
            margin: 0 auto 20px;
            box-shadow: 0 0 20px rgba(255, 94, 0, 0.5);
        }
        
        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        
        .hero-description {
            max-width: 600px;
            margin: 0 auto 20px;
            color: var(--text-secondary);
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }
        
        .hero-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .btn-play {
            background: var(--primary-color);
            color: white;
            padding: 14px 30px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }
        
        .btn-play:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 94, 0, 0.3);
        }
        
        .btn-info {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 14px 30px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            backdrop-filter: blur(10px);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }
        
        .btn-info:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* –°–µ–∫—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 40px 0 20px;
        }
        
        .section-title {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sort-filter {
            display: flex;
            gap: 15px;
        }
        
        .sort-filter select {
            background: var(--light-bg);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .movie-card {
            background: var(--medium-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: var(--transition);
            position: relative;
            cursor: pointer;
        }
        
        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .movie-card:hover .movie-poster {
            transform: scale(1.05);
        }
        
        .movie-info {
            padding: 15px;
        }
        
        .movie-title {
            font-weight: 700;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 16px;
        }
        
        .movie-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .movie-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .movie-duration {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .movie-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            opacity: 0;
            transition: var(--transition);
        }
        
        .movie-card:hover .movie-actions {
            opacity: 1;
        }
        
        .action-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .action-btn:hover {
            background: var(--primary-color);
            transform: scale(1.1);
        }

        /* –ñ–∞–Ω—Ä—ã —Ñ–∏–ª—å–º–∞ */
        .movie-genres {
            margin: 8px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .genre-tag {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .categories {
            display: flex;
            gap: 15px;
            margin: 20px 0 40px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: thin;
        }
        
        .categories::-webkit-scrollbar {
            height: 6px;
        }
        
        .categories::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }
        
        .category-btn {
            padding: 10px 20px;
            border-radius: 20px;
            background: var(--light-bg);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
            font-weight: 600;
            font-size: 14px;
        }
        
        .category-btn.active, .category-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        /* –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä */
        .video-player {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .player-container {
            width: 80%;
            max-width: 900px;
            background: var(--dark-bg);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .player-container:fullscreen {
            width: 100%;
            height: 100%;
            max-width: none;
            border-radius: 0;
            display: flex;
            flex-direction: column;
        }
        
        .player-container:-webkit-full-screen {
            width: 100%;
            height: 100%;
            max-width: none;
            border-radius: 0;
            display: flex;
            flex-direction: column;
        }
        
        .player-container:-ms-fullscreen {
            width: 100%;
            height: 100%;
            max-width: none;
            border-radius: 0;
            display: flex;
            flex-direction: column;
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--medium-bg);
        }
        
        .player-title {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .close-player {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .close-player:hover {
            color: var(--primary-color);
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: #000;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            object-fit: contain;
        }
        
        .player-container:fullscreen .video-container {
            flex: 1;
            padding-bottom: 0;
            height: 100%;
        }
        
        .player-controls {
            padding: 15px 20px;
            background: var(--medium-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quality-selector select {
            background: var(--light-bg);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .watch-buttons {
            display: flex;
            gap: 10px;
        }
        
        .watch-btn {
            padding: 10px 15px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
            font-weight: 600;
            font-size: 14px;
        }
        
        .watch-btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .watch-btn-primary:hover {
            background: var(--secondary-color);
        }
        
        .watch-btn-secondary {
            background: var(--light-bg);
            color: white;
        }
        
        .watch-btn-secondary:hover {
            background: var(--primary-color);
        }
        
        /* –ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã */
        .similar-movies {
            margin-top: 30px;
            padding: 20px;
            background: var(--medium-bg);
            border-radius: 10px;
        }
        
        .similar-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .similar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        /* –§—É—Ç–µ—Ä */
        footer {
            background: var(--medium-bg);
            padding: 40px 0 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            font-weight: 700;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary-color);
        }
        
        .footer-column ul {
            list-style: none;
            padding: 0;
        }
        
        .footer-column ul li {
            margin-bottom: 10px;
        }
        
        .footer-column a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            font-size: 15px;
        }
        
        .footer-column a:hover {
            color: var(--primary-color);
        }
        
        .footer-column p {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 15px;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            transition: var(--transition);
            font-size: 18px;
        }
        
        .social-link:hover {
            background: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--light-bg);
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero {
                height: 400px;
            }
            
            .hero-title {
                font-size: 2rem;
            }
            
            .player-container {
                width: 95%;
            }
        }
        
        @media (max-width: 768px) {
            .movie-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
            
            .hero {
                height: 350px;
            }
            
            .hero-content {
                padding: 20px;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .user-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .search-box {
                width: 100%;
            }
            
            .search-box input {
                width: 100%;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .player-controls {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            nav a {
                font-size: 15px;
            }
            
            .btn {
                padding: 12px 18px;
            }
        }
        
        @media (max-width: 576px) {
            .movie-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero {
                height: 300px;
            }
            
            .hero-title {
                font-size: 1.5rem;
            }
            
            .hero-actions {
                flex-direction: column;
            }
            
            .btn-play, .btn-info {
                justify-content: center;
                width: 100%;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .player-container {
                width: 100%;
                border-radius: 0;
            }
            
            .category-btn {
                padding: 8px 16px;
                font-size: 13px;
            }
        }

        /* –ó–∞–≥—Ä—É–∑—á–∏–∫ */
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--light-bg);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */
        .error-message {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        .error-message i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        /* –î–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞ */
        .movie-details {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .details-container {
            width: 80%;
            max-width: 900px;
            background: var(--dark-bg);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .details-header {
            position: relative;
            height: 300px;
            overflow: hidden;
        }
        
        .details-backdrop {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.4);
        }
        
        .details-header-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            display: flex;
            gap: 20px;
            align-items: flex-end;
        }
        
        .details-poster {
            width: 150px;
            height: 225px;
            object-fit: cover;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .details-title-section {
            flex: 1;
        }
        
        .details-title {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        
        .details-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .details-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .details-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .details-content {
            padding: 20px;
        }
        
        .details-description {
            margin-bottom: 20px;
            line-height: 1.7;
            color: var(--text-secondary);
            font-size: 16px;
        }
        
        .details-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            font-size: 1.2rem;
            transition: var(--transition);
        }
        
        .details-close:hover {
            background: var(--primary-color);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: var(--dark-bg);
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            color: var(--primary-color);
        }
        
        .modal-title {
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid var(--light-bg);
            background: var(--medium-bg);
            color: white;
            transition: var(--transition);
            font-size: 15px;
        }
        
        .form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .form-submit {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 700;
            transition: var(--transition);
            font-size: 16px;
        }
        
        .form-submit:hover {
            background: var(--secondary-color);
        }
        
        .form-footer {
            margin-top: 20px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 15px;
        }
        
        .form-footer a {
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }
        
        .form-footer a:hover {
            color: var(--secondary-color);
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .user-avatar:hover {
            transform: scale(1.1);
        }
        
        .user-name {
            font-weight: 600;
            font-size: 15px;
        }
        
        .dropdown {
            position: relative;
        }
        
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--medium-bg);
            border-radius: 8px;
            padding: 10px 0;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }
        
        .dropdown-item {
            padding: 10px 15px;
            color: var(--text-color);
            text-decoration: none;
            display: block;
            transition: var(--transition);
            font-size: 14px;
        }
        
        .dropdown-item:hover {
            background: var(--light-bg);
        }
        
        .dropdown-divider {
            height: 1px;
            background: var(--light-bg);
            margin: 5px 0;
        }
        
        .show {
            display: block;
        }
        
        /* –ò–∫–æ–Ω–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ */
        .status-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            display: none;
        }
        
        .status-btn {
            padding: 8px 15px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .status-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .status-btn:not(.active) {
            background: var(--light-bg);
            color: var(--text-secondary);
        }
        
        .status-btn:not(.active):hover {
            background: var(--primary-color);
            color: white;
        }
        
        /* –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */
        .personal-recommendations {
            margin-top: 40px;
        }

        /* –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤–∏–¥–µ–æ */
        .source-selector {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            display: none;
        }
        
        .source-btn {
            padding: 8px 15px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            transition: var(--transition);
            background: var(--light-bg);
            color: var(--text-secondary);
        }
        
        .source-btn:hover, .source-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º */
        .fullscreen-btn {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            font-size: 1.2rem;
            transition: var(--transition);
        }
        
        .fullscreen-btn:hover {
            background: var(--primary-color);
        }
        
        .video-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        /* –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
        html {
            scroll-behavior: smooth;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--dark-bg);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å–∞–π—Ç–∞ */
        body:fullscreen {
            overflow: auto;
        }
        
        body:fullscreen header {
            padding: 20px 0;
        }
        
        body:fullscreen .container {
            max-width: 95%;
        }
        
        body:fullscreen .hero {
            height: 60vh;
        }
        
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
        .fullscreen-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            z-index: 1000;
            display: none;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ */
        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ */
        .comments-section {
            margin-top: 30px;
        }
        
        .comments-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .comment-form {
            background: var(--medium-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .comment-form textarea {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--light-bg);
            background: var(--dark-bg);
            color: white;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 15px;
            font-family: inherit;
        }
        
        .comment-form textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .comment-submit {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .comment-submit:hover {
            background: var(--secondary-color);
        }
        
        .comment-submit:disabled {
            background: var(--light-bg);
            cursor: not-allowed;
        }
        
        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .comment-item {
            background: var(--medium-bg);
            padding: 15px;
            border-radius: 10px;
            position: relative;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .comment-author {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .comment-date {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .comment-text {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .comment-action {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .comment-action:hover {
            color: var(--primary-color);
        }
        
        .comment-action.liked {
            color: var(--primary-color);
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .admin-btn {
            padding: 5px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
            transition: var(--transition);
        }
        
        .btn-delete {
            background: #ff4757;
            color: white;
        }
        
        .btn-delete:hover {
            background: #ff6b81;
        }
        
        .btn-pin {
            background: var(--secondary-color);
            color: white;
        }
        
        .btn-pin:hover {
            background: #9b59b6;
        }
        
        .pinned-comment {
            border-left: 4px solid var(--primary-color);
            background: linear-gradient(90deg, rgba(138, 43, 226, 0.1) 0%, rgba(26, 26, 26, 1) 30%);
        }
        
        .pinned-badge {
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 10px;
        }
        
        .login-to-comment {
            text-align: center;
            padding: 20px;
            background: var(--medium-bg);
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .login-to-comment p {
            margin-bottom: 15px;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
    <div class="fullscreen-indicator" id="fullscreenIndicator">
        <i class="fas fa-expand"></i> –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
    </div>

    <!-- –®–∞–ø–∫–∞ -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon"><i class="fas fa-fire"></i></span>
                    <span class="logo-text">Kitsunez</span>
                </div>
                
                <nav>
                    <ul>
                        <li><a href="#" class="active" data-section="home"><i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="#" data-section="movies"><i class="fas fa-film"></i> –§–∏–ª—å–º—ã</a></li>
                        <li><a href="#" data-section="series"><i class="fas fa-tv"></i> –°–µ—Ä–∏–∞–ª—ã</a></li>
                        <li><a href="#" data-section="anime"><i class="fas fa-dragon"></i> –ê–Ω–∏–º–µ</a></li>
                        <li><a href="#" id="favoritesLink" data-section="favorites"><i class="fas fa-heart"></i> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a></li>
                    </ul>
                </nav>
                
                <div class="user-actions">
                    <div class="search-box">
                        <input type="text" placeholder="–ü–æ–∏—Å–∫..." id="searchInput">
                        <button id="searchButton"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –¥–ª—è –≤—Å–µ–≥–æ —Å–∞–π—Ç–∞ -->
                    <button class="btn-fullscreen" id="fullscreenButton" title="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º">
                        <i class="fas fa-expand"></i>
                    </button>
                    
                    <div class="auth-buttons" id="authButtons">
                        <button class="btn btn-login" id="loginButton">–í—Ö–æ–¥</button>
                        <button class="btn btn-register" id="registerButton">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    </div>
                    
                    <div class="user-profile" id="userProfile" style="display: none;">
                        <div class="dropdown">
                            <img src="https://i.ibb.co/Sht7vLz/favicon.png" alt="–ê–≤–∞—Ç–∞—Ä" class="user-avatar" id="userAvatar">
                            <span class="user-name" id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                            <div class="dropdown-menu" id="dropdownMenu">
                                <a href="#" class="dropdown-item" id="profileLink"><i class="fas fa-user"></i> –ü—Ä–æ—Ñ–∏–ª—å</a>
                                <a href="#" class="dropdown-item" id="watchedLink"><i class="fas fa-check-circle"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ</a>
                                <a href="#" class="dropdown-item" id="watchlistLink"><i class="fas fa-bookmark"></i> –•–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item" id="logoutButton"><i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- –ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–Ω–µ—Ä -->
    <section class="hero">
        <img src="https://via.placeholder.com/1600x900/1a1a1a/ffffff?text=Kitsunez+–ì–ª–∞–≤–Ω—ã–π+–ë–∞–Ω–Ω–µ—Ä" alt="Kitsunez" class="hero-banner">
        <div class="hero-content">
            <img src="https://i.ibb.co/Sht7vLz/favicon.png" alt="Kitsunez" class="hero-avatar">
            <h1 class="hero-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ Kitsunez</h1>
            <p class="hero-description">–õ—É—á—à–∞—è —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –æ–≥—Ä–æ–º–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π —Ñ–∏–ª—å–º–æ–≤, —Å–µ—Ä–∏–∞–ª–æ–≤ –∏ –∞–Ω–∏–º–µ.</p>
            <div class="hero-actions">
                <button class="btn btn-play" id="startWatchingBtn">
                    <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
                </button>
                <button class="btn btn-info" id="moreInfoBtn">
                    <i class="fas fa-info-circle"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                </button>
            </div>
        </div>
    </section>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <main class="container">
        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="categories">
            <button class="category-btn active" data-category="all">–í—Å–µ</button>
            <button class="category-btn" data-category="feature">üé¨ –ü–æ–ª–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ã–µ</button>
            <button class="category-btn" data-category="short">üé• –ö–æ—Ä–æ—Ç–∫–æ–º–µ—Ç—Ä–∞–∂–∫–∏</button>
            <button class="category-btn" data-category="new">üî• –ù–æ–≤–æ–µ</button>
            <button class="category-btn" data-category="popular">‚≠ê –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</button>
            <button class="category-btn" data-category="anime">ü¶ä –ê–Ω–∏–º–µ</button>
        </div>

        <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã -->
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-fire"></i> –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã</h2>
            <div class="sort-filter">
                <select id="sortBy">
                    <option value="date">–ü–æ –¥–∞—Ç–µ</option>
                    <option value="rating">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É</option>
                    <option value="duration">–ü–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</option>
                    <option value="views">–ü–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º</option>
                </select>
            </div>
        </div>
        
        <div class="movie-grid" id="popularMovies">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ -->
        </div>

        <!-- –ù–æ–≤–∏–Ω–∫–∏ -->
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-star"></i> –ù–æ–≤–∏–Ω–∫–∏</h2>
        </div>
        <div class="movie-grid" id="newMovies">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ -->
        </div>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-thumbs-up"></i> –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å</h2>
        </div>
        <div class="movie-grid" id="recommendedMovies">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ -->
        </div>

        <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
        <div class="section-header personal-recommendations" id="personalSection" style="display: none;">
            <h2 class="section-title"><i class="fas fa-user"></i> –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
        </div>
        <div class="movie-grid" id="personalMovies">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ -->
        </div>
    </main>

    <!-- –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä -->
    <div class="video-player" id="videoPlayer">
        <div class="player-container">
            <div class="player-header">
                <div class="player-title" id="playerTitle">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</div>
                <button class="close-player" id="closePlayerBtn"><i class="fas fa-times"></i></button>
            </div>
            <div class="video-wrapper">
                <div class="video-container" id="videoContainer">
                    <iframe id="playerFrame" width="100%" height="100%" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <button class="fullscreen-btn" id="playerFullscreenBtn">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            <div class="player-controls">
                <div class="quality-selector">
                    <select id="qualitySelect">
                        <option value="auto">–ê–≤—Ç–æ</option>
                        <option value="hd1080">1080p</option>
                        <option value="hd720">720p</option>
                        <option value="medium">480p</option>
                    </select>
                </div>
                <div class="watch-buttons">
                    <button class="watch-btn watch-btn-primary"><i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å</button>
                    <button class="watch-btn watch-btn-secondary"><i class="fas fa-share-alt"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                </div>
            </div>
            
            <!-- –ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã -->
            <div class="similar-movies">
                <h3 class="similar-title">–ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã</h3>
                <div class="similar-grid" id="similarMovies">
                    <!-- –ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>

    <!-- –î–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞ -->
    <div class="movie-details" id="movieDetails">
        <div class="details-container">
            <button class="details-close" id="closeDetailsBtn">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="details-header">
                <img src="" alt="" class="details-backdrop" id="detailsBackdrop">
                <div class="details-header-content">
                    <img src="" alt="" class="details-poster" id="detailsPoster">
                    <div class="details-title-section">
                        <h2 class="details-title" id="detailsTitle"></h2>
                        <div class="details-meta">
                            <span class="details-meta-item" id="detailsYear"></span>
                            <span class="details-meta-item" id="detailsDuration"></span>
                            <span class="details-meta-item" id="detailsRating"></span>
                            <span class="details-meta-item" id="detailsAgeRating"></span>
                        </div>
                        <div class="movie-genres" id="detailsGenres"></div>
                        <div class="details-actions">
                            <button class="btn btn-play" id="detailsPlayBtn">
                                <i class="fas fa-play"></i> –°–º–æ—Ç—Ä–µ—Ç—å
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="details-content">
                <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                <p class="details-description" id="detailsDescription"></p>
                
                <!-- –°–µ–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
                <div class="comments-section">
                    <h3 class="comments-title"><i class="fas fa-comments"></i> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
                    
                    <div class="comment-form" id="commentForm" style="display: none;">
                        <textarea id="commentText" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤ –æ —Ñ–∏–ª—å–º–µ..." maxlength="1000"></textarea>
                        <button class="comment-submit" id="submitComment">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                    
                    <div class="login-to-comment" id="loginToComment" style="display: none;">
                        <p>–ß—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É</p>
                        <button class="btn btn-login" id="loginToCommentBtn">–í–æ–π—Ç–∏</button>
                    </div>
                    
                    <div class="comments-list" id="commentsList">
                        <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="modal-close" id="closeLoginModalBtn"><i class="fas fa-times"></i></button>
            <h2 class="modal-title">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="form-submit">–í–æ–π—Ç–∏</button>
            </form>
            <div class="form-footer">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a id="showRegisterModalLink">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <button class="modal-close" id="closeRegisterModalBtn"><i class="fas fa-times"></i></button>
            <h2 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    <input type="password" id="registerConfirmPassword" required>
                </div>
                <button type="submit" class="form-submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
            <div class="form-footer">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a id="showLoginModalLink">–í–æ–π—Ç–∏</a>
            </div>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>–û Kitsunez</h3>
                    <p>Kitsunez ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –æ–≥—Ä–æ–º–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π —Ñ–∏–ª—å–º–æ–≤, —Å–µ—Ä–∏–∞–ª–æ–≤ –∏ –∞–Ω–∏–º–µ. –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
                    <div class="social-links">
                        <a href="https://t.me/kitsunezwatch" class="social-link" target="_blank"><i class="fab fa-telegram"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>–†–∞–∑–¥–µ–ª—ã</h3>
                    <ul>
                        <li><a href="#" data-section="movies">–§–∏–ª—å–º—ã</a></li>
                        <li><a href="#" data-section="series">–°–µ—Ä–∏–∞–ª—ã</a></li>
                        <li><a href="#" data-section="anime">–ê–Ω–∏–º–µ</a></li>
                        <li><a href="#" data-section="new">–ù–æ–≤–∏–Ω–∫–∏</a></li>
                        <li><a href="#" data-section="popular">–¢–æ–ø-250</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>¬© 2025 Kitsunez. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const API_KEY = 'YOUR_YOUTUBE_API_KEY';
        const EXCLUDED_KEYWORDS = ['trailer', 'teaser', '–æ–±–∑–æ—Ä', 'clip', 'promo', '—Ç—Ä–µ–π–ª–µ—Ä', '—Ç–∏–∑–µ—Ä'];
        const INCLUDED_KEYWORDS = ['full movie', '—Ñ–∏–ª—å–º', 'movie', 'short film', '–∫–æ—Ä–æ—Ç–∫–æ–º–µ—Ç—Ä–∞–∂–∫–∞', '–ø–æ–ª–Ω—ã–π —Ñ–∏–ª—å–º'];
        
        // –î–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º–æ–≤
        const moviesData = [
            {
                title: "–û–≥–ª—è–¥–∏—Å—å - –∞–Ω–∏–º–µ —Ñ–∏–ª—å–º",
                poster: "https://images.kinorium.com/movie/shot/11159722/h280_54330844.jpg?21743992669",
                backdrop: "https://images.kinorium.com/movie/slot/11159722/w1920_54330844.jpg?21743992669",
                googleDriveId: "1dzAHF1MtFV72yhUxKxlShTGqM0JqowDd",
                duration: 58.21,
                year: 2024,
                rating: 8.6,
                views: 1500000,
                category: "anime",
                ageRating: "16+",
                genres: ["#drama", "#syonen"],
                description: "–§—É–¥–∑–∏–Ω–æ ‚Äî –º–æ–ª–æ–¥–∞—è —Ö—É–¥–æ–∂–Ω–∏—Ü–∞ —Å –Ω–µ–ø—Ä–µ—Ö–æ–¥—è—â–µ–π —Å—Ç—Ä–∞—Å—Ç—å—é –∫ —Ä–∏—Å–æ–≤–∞–Ω–∏—é. –û–Ω–∞ –º–æ–∂–µ—Ç —á–∞—Å–∞–º–∏ —Å–∏–¥–µ—Ç—å –∑–∞ —Å—Ç–æ–ª–æ–º, –≤–æ–ø–ª–æ—â–∞—è –≤ –º–∞–Ω–≥–µ —Å–≤–æ–∏ —Ñ–∞–Ω—Ç–∞–∑–∏–∏. –ï—ë —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ—Ä–∞–∂–∞—é—Ç: –≤ –µ—ë –≤–æ–∑—Ä–∞—Å—Ç–µ —Ç–∞–∫–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–æ–±–∏—Ç—å—Å—è –Ω–µ–ª–µ–≥–∫–æ, –∏ –∏–º–µ–Ω–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –µ—ë —Ä–∞–±–æ—Ç—ã –±—ã—Å—Ç—Ä–æ –∑–∞–≤–æ–µ–≤—ã–≤–∞—é—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å. –û–Ω–∞ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –∫ —Å–µ–±–µ –≤–Ω–∏–º–∞–Ω–∏–µ –≤–æ—Å—Ö–∏—â–µ–Ω–Ω—ã—Ö –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ—Å—Ö–∏—â–∞—é—Ç—Å—è –µ—ë —É—Å–µ—Ä–¥–∏–µ–º.\n\n–ï—ë —Ç–∞–ª–∞–Ω—Ç—É –≤–æ—Å—Ç–æ—Ä–≥–∞–µ—Ç—Å—è –∏ —É—á–∏—Ç–µ–ª—å, –æ–¥–Ω–∞–∫–æ –æ–Ω —Ç–∞–∫–∂–µ –æ–±—Ä–∞—â–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥—É—é —É—á–µ–Ω–∏—Ü—É, –ö–µ–º–æ—Ç–æ, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Ö–æ–¥–∏—Ç –≤ —à–∫–æ–ª—É. –ö–µ–º–æ—Ç–æ, –∫–∞–∫ –∏ –§—É–¥–∑–∏–Ω–æ, —É–≤–ª–µ—á–µ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ–º –º–∞–Ω–≥–∏, —Ö–æ—Ç—è –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Å–≤—è—â–∞–µ—Ç —Å–µ–±—è —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ —à–∫–æ–ª—å–Ω–æ–π –≥–∞–∑–µ—Ç–æ–π. –ï—ë –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –∏–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ –æ–¥–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É, –¥–æ–±–∞–≤–ª—è—è –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è —Å–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–∞ –º–µ–∂–¥—É –¥–µ–≤–æ—á–∫–∞–º–∏.\n\n–ß—É–≤—Å—Ç–≤—É—è –Ω–∞—á–∞–ª–æ —Å–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–∞, –§—É–¥–∑–∏–Ω–æ —Å—Ç—Ä–µ–º–∏—Ç—Å—è –ø—Ä–µ–≤–∑–æ–π—Ç–∏ –ö–µ–º–æ—Ç–æ –∏ –Ω–µ –∂–µ–ª–∞–µ—Ç –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ —É—Å–ø–µ—Ö–∞–º–∏. –£—á–∏—Ç–µ–ª—å, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—è —ç—Ç–æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç, —Ä–µ—à–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É –¥–µ–≤–æ—á–µ–∫ —Å —Ü–µ–ª—å—é –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏—Ö —Ç–∞–ª–∞–Ω—Ç—ã –≤ –æ–±—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ. –û–Ω –Ω–∞–¥–µ–µ—Ç—Å—è, —á—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –∏—Ö –≤ –ª—É—á—à–∏—Ö –ø–æ–¥—Ä—É–≥ –∏ –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ–∑–¥–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–∏—Å—Ç–∏–Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ. –û–∂–∏–¥–∞–µ—Ç –ª–∏ –§—É–¥–∑–∏–Ω–æ –∏ –ö–µ–º–æ—Ç–æ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏–ª–∏ –æ–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Å–æ–ø–µ—Ä–Ω–∏—á–∞—Ç—å, —Å—Ç–æ–∏—Ç —É–≤–∏–¥–µ—Ç—å. –ù–æ –ø–µ—Ä–µ–¥ –Ω–∏–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –¥–ª—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏—Ö –∏ –Ω–µ–æ–±—ã—á–Ω—ã—Ö –∏–∑–¥–∞–Ω–∏–π."
            }
        ];

        // –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('kitsunez_users')) || [];
        let currentSection = 'home';
        
        // –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
        let comments = JSON.parse(localStorage.getItem('kitsunez_comments')) || [];
        let currentMovieId = null;

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
        function toggleFullscreenSite() {
            const fullscreenButton = document.getElementById('fullscreenButton');
            const icon = fullscreenButton.querySelector('i');
            
            if (!document.fullscreenElement) {
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    document.documentElement.msRequestFullscreen();
                }
                
                icon.classList.remove('fa-expand');
                icon.classList.add('fa-compress');
                
                showFullscreenIndicator();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                
                icon.classList.remove('fa-compress');
                icon.classList.add('fa-expand');
            }
        }
        
        function showFullscreenIndicator() {
            const indicator = document.getElementById('fullscreenIndicator');
            indicator.style.display = 'flex';
            
            setTimeout(() => {
                indicator.style.animation = 'fadeOut 1s forwards';
                
                setTimeout(() => {
                    indicator.style.display = 'none';
                    indicator.style.animation = '';
                }, 1000);
            }, 2000);
        }
        
        function handleFullscreenChange() {
            const fullscreenButton = document.getElementById('fullscreenButton');
            const icon = fullscreenButton.querySelector('i');
            
            if (document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                icon.classList.remove('fa-expand');
                icon.classList.add('fa-compress');
            } else {
                icon.classList.remove('fa-compress');
                icon.classList.add('fa-expand');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        function registerUser(name, email, password) {
            if (users.find(user => user.email === email)) {
                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
                return false;
            }
            
            if (users.find(user => user.name === name)) {
                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
                return false;
            }
            
            // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userId = generateUserId();
            
            const newUser = {
                id: userId,
                name,
                email,
                password,
                isAdmin: email.toLowerCase() === 'glebmalashkov@gmail.com', // –î–∞–µ–º –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                favorites: [],
                watched: [],
                watchlist: [],
                preferences: {
                    genres: [],
                    minRating: 0
                }
            };
            
            users.push(newUser);
            localStorage.setItem('kitsunez_users', JSON.stringify(users));
            
            loginUser(email, password);
            
            return true;
        }
        
        function generateUserId() {
            return 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }
        
        function loginUser(email, password) {
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('kitsunez_current_user', JSON.stringify(user));
                updateUIForUser();
                closeModal('loginModal');
                return true;
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
                return false;
            }
        }
        
        function logoutUser() {
            currentUser = null;
            localStorage.removeItem('kitsunez_current_user');
            updateUIForUser();
        }
        
        function updateUIForUser() {
            const authButtons = document.getElementById('authButtons');
            const userProfile = document.getElementById('userProfile');
            
            if (currentUser) {
                authButtons.style.display = 'none';
                userProfile.style.display = 'flex';
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('personalSection').style.display = 'flex';
                loadPersonalRecommendations();
            } else {
                authButtons.style.display = 'flex';
                userProfile.style.display = 'none';
                document.getElementById('personalSection').style.display = 'none';
            }
        }
        
        function updateMovieStatus(movieId, status, add) {
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            const statusMap = {
                'favorite': 'favorites',
                'watched': 'watched',
                'watchlist': 'watchlist'
            };
            
            const listName = statusMap[status];
            
            if (add) {
                if (!currentUser[listName].includes(movieId)) {
                    currentUser[listName].push(movieId);
                }
            } else {
                currentUser[listName] = currentUser[listName].filter(id => id !== movieId);
            }
            
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
                localStorage.setItem('kitsunez_users', JSON.stringify(users));
                localStorage.setItem('kitsunez_current_user', JSON.stringify(currentUser));
            }
        }
        
        function loadPersonalRecommendations() {
            if (!currentUser) return;
            
            const personalMovies = moviesData.filter(movie => {
                if (currentUser.favorites.length > 0) {
                    const favoriteMovie = moviesData.find(m => m.googleDriveId === currentUser.favorites[0]);
                    if (favoriteMovie && movie.genres.some(genre => favoriteMovie.genres.includes(genre))) {
                        return true;
                    }
                }
                
                return movie.rating >= 8.0;
            });
            
            renderMovies(personalMovies, 'personalMovies');
        }
        
        function showLoginModal() {
            closeModal('registerModal');
            document.getElementById('loginModal').style.display = 'flex';
        }
        
        function showRegisterModal() {
            closeModal('loginModal');
            document.getElementById('registerModal').style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–∞
        function openPlayer(title, googleDriveId, duration) {
            const player = document.getElementById('videoPlayer');
            const playerTitle = document.getElementById('playerTitle');
            const playerFrame = document.getElementById('playerFrame');
            
            playerTitle.textContent = title;
            
            playerFrame.src = `https://drive.google.com/file/d/${googleDriveId}/preview?embedded=true`;
            
            player.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            loadSimilarMovies(googleDriveId);
            
            if (currentUser) {
                updateMovieStatus(googleDriveId, 'watched', true);
            }
        }
        
        function closePlayer() {
            const player = document.getElementById('videoPlayer');
            const playerFrame = document.getElementById('playerFrame');
            
            player.style.display = 'none';
            playerFrame.src = '';
            document.body.style.overflow = 'auto';
            
            if (document.fullscreenElement) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }
        
        function toggleFullScreen() {
            const playerContainer = document.querySelector('.player-container');
            const fullscreenBtn = document.querySelector('.fullscreen-btn i');
            
            if (!document.fullscreenElement) {
                if (playerContainer.requestFullscreen) {
                    playerContainer.requestFullscreen();
                } else if (playerContainer.webkitRequestFullscreen) {
                    playerContainer.webkitRequestFullscreen();
                } else if (playerContainer.msRequestFullscreen) {
                    playerContainer.msRequestFullscreen();
                }
                
                fullscreenBtn.classList.remove('fa-expand');
                fullscreenBtn.classList.add('fa-compress');
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                
                fullscreenBtn.classList.remove('fa-compress');
                fullscreenBtn.classList.add('fa-expand');
            }
        }
        
        function setupDoubleClickFullscreen() {
            const videoWrapper = document.querySelector('.video-wrapper');
            if (videoWrapper) {
                videoWrapper.addEventListener('dblclick', toggleFullScreen);
            }
        }
        
        function handlePlayerFullScreenChange() {
            const fullscreenBtn = document.querySelector('.fullscreen-btn i');
            if (document.fullscreenElement) {
                fullscreenBtn.classList.remove('fa-expand');
                fullscreenBtn.classList.add('fa-compress');
            } else {
                fullscreenBtn.classList.remove('fa-compress');
                fullscreenBtn.classList.add('fa-expand');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞
        function openMovieDetails(movie) {
            const details = document.getElementById('movieDetails');
            const backdrop = document.getElementById('detailsBackdrop');
            const poster = document.getElementById('detailsPoster');
            const title = document.getElementById('detailsTitle');
            const year = document.getElementById('detailsYear');
            const duration = document.getElementById('detailsDuration');
            const rating = document.getElementById('detailsRating');
            const ageRating = document.getElementById('detailsAgeRating');
            const genres = document.getElementById('detailsGenres');
            const description = document.getElementById('detailsDescription');
            const playBtn = document.getElementById('detailsPlayBtn');
            
            backdrop.src = movie.backdrop || movie.poster;
            poster.src = movie.poster;
            title.textContent = movie.title;
            year.textContent = movie.year;
            
            if (typeof movie.duration === 'string') {
                duration.textContent = movie.duration;
            } else {
                const hours = Math.floor(movie.duration / 60);
                const minutes = Math.floor(movie.duration % 60);
                duration.textContent = hours > 0 ? `${hours}—á ${minutes}–º` : `${minutes}–º`;
            }
            
            rating.innerHTML = `<i class="fas fa-star"></i> ${movie.rating}`;
            ageRating.textContent = movie.ageRating;
            
            genres.innerHTML = '';
            if (movie.genres && movie.genres.length) {
                movie.genres.forEach(genre => {
                    const genreSpan = document.createElement('span');
                    genreSpan.className = 'genre-tag';
                    genreSpan.textContent = genre;
                    genres.appendChild(genreSpan);
                });
            }
            
            description.textContent = movie.description;
            
            playBtn.onclick = () => {
                closeMovieDetails();
                openPlayer(movie.title, movie.googleDriveId, movie.duration);
            };
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Ñ–∏–ª—å–º–∞
            currentMovieId = movie.googleDriveId;
            loadComments(currentMovieId);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            const commentForm = document.getElementById('commentForm');
            const loginToComment = document.getElementById('loginToComment');
            
            if (currentUser) {
                commentForm.style.display = 'block';
                loginToComment.style.display = 'none';
            } else {
                commentForm.style.display = 'none';
                loginToComment.style.display = 'block';
            }
            
            details.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeMovieDetails() {
            const details = document.getElementById('movieDetails');
            details.style.display = 'none';
            document.body.style.overflow = 'auto';
            currentMovieId = null;
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ñ–∏–ª—å–º–æ–≤
        function loadSimilarMovies(currentGoogleDriveId) {
            const similarContainer = document.getElementById('similarMovies');
            similarContainer.innerHTML = '';
            
            const similarMovies = moviesData
                .filter(movie => movie.googleDriveId !== currentGoogleDriveId)
                .slice(0, 4);
            
            similarMovies.forEach(movie => {
                const similarMovieElement = document.createElement('div');
                similarMovieElement.className = 'movie-card';
                similarMovieElement.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.title}</h3>
                    </div>
                `;
                
                similarMovieElement.addEventListener('click', () => {
                    openPlayer(movie.title, movie.googleDriveId, movie.duration);
                });
                
                similarContainer.appendChild(similarMovieElement);
            });
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ –≤ —Å–µ—Ç–∫–µ
        function renderMovies(movies, containerId) {
            const container = document.getElementById(containerId);
            
            if (movies.length === 0) {
                container.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-film"></i>
                        <p>–§–∏–ª—å–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            movies.forEach(movie => {
                let durationText;
                if (typeof movie.duration === 'string') {
                    durationText = movie.duration;
                } else {
                    const hours = Math.floor(movie.duration / 60);
                    const minutes = Math.floor(movie.duration % 60);
                    durationText = hours > 0 ? `${hours}—á ${minutes}–º` : `${minutes}–º`;
                }
                
                const movieElement = document.createElement('div');
                movieElement.className = 'movie-card fade-in';
                movieElement.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-actions">
                        <button class="action-btn play-btn">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="action-btn info-btn">
                            <i class="fas fa-info"></i>
                        </button>
                    </div>
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.title}</h3>
                        ${movie.genres && movie.genres.length ? `
                        <div class="movie-genres">
                            ${movie.genres.map(genre => `<span class="genre-tag">${genre}</span>`).join('')}
                        </div>
                        ` : ''}
                        <div class="movie-meta">
                            <span>${movie.year}${movie.ageRating ? ` (${movie.ageRating})` : ''}</span>
                            <div>
                                <span class="movie-duration"><i class="fas fa-clock"></i> ${durationText}</span>
                                <span class="movie-rating"><i class="fas fa-star"></i> ${movie.rating}</span>
                            </div>
                        </div>
                    </div>
                `;
                
                movieElement.addEventListener('click', (e) => {
                    if (!e.target.closest('.movie-actions')) {
                        openMovieDetails(movie);
                    }
                });
                
                const playBtn = movieElement.querySelector('.play-btn');
                playBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    openPlayer(movie.title, movie.googleDriveId, movie.duration);
                });
                
                const infoBtn = movieElement.querySelector('.info-btn');
                infoBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    openMovieDetails(movie);
                });
                
                container.appendChild(movieElement);
            });
        }
        
        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∏–ª—å–º–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function filterMoviesByCategory(category) {
            if (category === 'all') {
                return moviesData;
            }
            
            return moviesData.filter(movie => {
                if (category === 'new') {
                    return movie.year >= 2020;
                } else if (category === 'popular') {
                    return movie.views > 10000000;
                } else if (category === 'anime') {
                    return movie.category === 'anime';
                } else {
                    return movie.category === category;
                }
            });
        }
        
        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–∏–ª—å–º–æ–≤
        function sortMovies(movies, criteria) {
            return [...movies].sort((a, b) => {
                if (criteria === 'date') {
                    return b.year - a.year;
                } else if (criteria === 'rating') {
                    return b.rating - a.rating;
                } else if (criteria === 'duration') {
                    return b.duration - a.duration;
                } else if (criteria === 'views') {
                    return b.views - a.views;
                }
                return 0;
            });
        }
        
        // –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤
        function searchMovies(query) {
            if (!query.trim()) {
                return moviesData;
            }
            
            const lowerQuery = query.toLowerCase();
            return moviesData.filter(movie => 
                movie.title.toLowerCase().includes(lowerQuery) || 
                movie.description.toLowerCase().includes(lowerQuery)
            );
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
        function handleFavoritesClick(e) {
            e.preventDefault();
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            const favoriteMovies = moviesData.filter(movie => 
                currentUser.favorites.includes(movie.googleDriveId)
            );
            
            renderMovies(favoriteMovies, 'popularMovies');
            document.querySelector('.section-title').innerHTML = `<i class="fas fa-heart"></i> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ`;
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤
        function switchSection(section) {
            currentSection = section;
            
            document.querySelectorAll('nav a').forEach(link => {
                if (link.dataset.section === section) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            
            if (section === 'home') {
                renderMovies(moviesData, 'popularMovies');
                renderMovies(moviesData.filter(movie => movie.year >= 2023), 'newMovies');
                renderMovies(moviesData.filter(movie => movie.rating >= 8.0), 'recommendedMovies');
                document.querySelector('.section-title').innerHTML = `<i class="fas fa-fire"></i> –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã`;
            } else if (section === 'favorites') {
                handleFavoritesClick({preventDefault: () => {}});
            } else {
                const filteredMovies = moviesData.filter(movie => movie.category === section);
                renderMovies(filteredMovies, 'popularMovies');
                document.querySelector('.section-title').innerHTML = `<i class="fas fa-film"></i> ${section.charAt(0).toUpperCase() + section.slice(1)}`;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
        function addComment(movieId, text) {
            if (!currentUser || !text.trim()) return false;
            
            const newComment = {
                id: 'comment_' + Date.now(),
                movieId: movieId,
                userId: currentUser.id,
                userName: currentUser.name,
                text: text.trim(),
                timestamp: Date.now(),
                likes: [],
                pinned: false
            };
            
            comments.push(newComment);
            localStorage.setItem('kitsunez_comments', JSON.stringify(comments));
            
            return true;
        }
        
        function deleteComment(commentId) {
            const commentIndex = comments.findIndex(c => c.id === commentId);
            
            if (commentIndex === -1) return false;
            
            const comment = comments[commentIndex];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞: —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å
            if (currentUser && (currentUser.isAdmin || currentUser.id === comment.userId)) {
                comments.splice(commentIndex, 1);
                localStorage.setItem('kitsunez_comments', JSON.stringify(comments));
                return true;
            }
            
            return false;
        }
        
        function toggleLikeComment(commentId) {
            if (!currentUser) return false;
            
            const comment = comments.find(c => c.id === commentId);
            
            if (!comment) return false;
            
            const likeIndex = comment.likes.indexOf(currentUser.id);
            
            if (likeIndex === -1) {
                comment.likes.push(currentUser.id);
            } else {
                comment.likes.splice(likeIndex, 1);
            }
            
            localStorage.setItem('kitsunez_comments', JSON.stringify(comments));
            return true;
        }
        
        function togglePinComment(commentId) {
            if (!currentUser || !currentUser.isAdmin) return false;
            
            const comment = comments.find(c => c.id === commentId);
            
            if (!comment) return false;
            
            comment.pinned = !comment.pinned;
            localStorage.setItem('kitsunez_comments', JSON.stringify(comments));
            return true;
        }
        
        function loadComments(movieId) {
            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = '';
            
            const movieComments = comments
                .filter(comment => comment.movieId === movieId)
                .sort((a, b) => {
                    // –°–Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ, –ø–æ—Ç–æ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                    if (a.pinned && !b.pinned) return -1;
                    if (!a.pinned && b.pinned) return 1;
                    return b.timestamp - a.timestamp;
                });
            
            if (movieComments.length === 0) {
                commentsList.innerHTML = '<p class="text-center">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>';
                return;
            }
            
            movieComments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = `comment-item ${comment.pinned ? 'pinned-comment' : ''}`;
                
                const isLiked = currentUser && comment.likes.includes(currentUser.id);
                const isAuthor = currentUser && currentUser.id === comment.userId;
                const isAdmin = currentUser && currentUser.isAdmin;
                
                commentElement.innerHTML = `
                    <div class="comment-header">
                        <span class="comment-author">
                            ${comment.userName}
                            ${comment.pinned ? '<span class="pinned-badge">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω</span>' : ''}
                        </span>
                        <span class="comment-date">${new Date(comment.timestamp).toLocaleString()}</span>
                    </div>
                    <div class="comment-text">${comment.text}</div>
                    <div class="comment-actions">
                        <button class="comment-action ${isLiked ? 'liked' : ''}" data-comment-id="${comment.id}" data-action="like">
                            <i class="fas fa-heart"></i> <span>${comment.likes.length}</span>
                        </button>
                    </div>
                    ${(isAdmin || isAuthor) ? `
                    <div class="admin-actions">
                        ${isAdmin ? `
                        <button class="admin-btn btn-pin" data-comment-id="${comment.id}" data-action="pin">
                            ${comment.pinned ? '–û—Ç–∫—Ä–µ–ø–∏—Ç—å' : '–ó–∞–∫—Ä–µ–ø–∏—Ç—å'}
                        </button>
                        ` : ''}
                        <button class="admin-btn btn-delete" data-comment-id="${comment.id}" data-action="delete">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                    ` : ''}
                `;
                
                commentsList.appendChild(commentElement);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
            commentsList.querySelectorAll('[data-action="like"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = this.dataset.commentId;
                    if (toggleLikeComment(commentId)) {
                        loadComments(movieId);
                    } else if (!currentUser) {
                        showLoginModal();
                    }
                });
            });
            
            commentsList.querySelectorAll('[data-action="delete"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = this.dataset.commentId;
                    if (deleteComment(commentId)) {
                        loadComments(movieId);
                    }
                });
            });
            
            commentsList.querySelectorAll('[data-action="pin"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = this.dataset.commentId;
                    if (togglePinComment(commentId)) {
                        loadComments(movieId);
                    }
                });
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const savedUser = localStorage.getItem('kitsunez_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUIForUser();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤
            renderMovies(moviesData, 'popularMovies');
            renderMovies(moviesData.filter(movie => movie.year >= 2023), 'newMovies');
            renderMovies(moviesData.filter(movie => movie.rating >= 8.0), 'recommendedMovies');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å–∞–π—Ç–∞
            document.getElementById('fullscreenButton').addEventListener('click', toggleFullscreenSite);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–∞
            document.addEventListener('fullscreenchange', handlePlayerFullScreenChange);
            document.addEventListener('webkitfullscreenchange', handlePlayerFullScreenChange);
            document.addEventListener('msfullscreenchange', handlePlayerFullScreenChange);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            setupDoubleClickFullscreen();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const categoryButtons = document.querySelectorAll('.category-btn');
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    const sortedBy = document.getElementById('sortBy').value;
                    const filteredMovies = sortMovies(filterMoviesByCategory(category), sortedBy);
                    
                    renderMovies(filteredMovies, 'popularMovies');
                });
            });
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            document.getElementById('sortBy').addEventListener('change', function() {
                const category = document.querySelector('.category-btn.active').dataset.category;
                const sortedBy = this.value;
                const filteredMovies = sortMovies(filterMoviesByCategory(category), sortedBy);
                
                renderMovies(filteredMovies, 'popularMovies');
            });
            
            // –ü–æ–∏—Å–∫
            document.getElementById('searchButton').addEventListener('click', function() {
                const searchInput = document.getElementById('searchInput');
                const query = searchInput.value;
                
                const results = searchMovies(query);
                renderMovies(results, 'popularMovies');
                
                document.querySelector('.section-title').innerHTML = `<i class="fas fa-search"></i> –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "${query}"`;
            });
            
            // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Enter
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('searchButton').click();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            document.getElementById('loginButton').addEventListener('click', showLoginModal);
            document.getElementById('registerButton').addEventListener('click', showRegisterModal);
            
            // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                loginUser(email, password);
            });
            
            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                if (password !== confirmPassword) {
                    alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
                    return;
                }
                
                registerUser(name, email, password);
            });
            
            // –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
            document.getElementById('logoutButton').addEventListener('click', function(e) {
                e.preventDefault();
                logoutUser();
                
                // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã –¥–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                if (currentMovieId) {
                    loadComments(currentMovieId);
                    
                    const commentForm = document.getElementById('commentForm');
                    const loginToComment = document.getElementById('loginToComment');
                    
                    commentForm.style.display = 'none';
                    loginToComment.style.display = 'block';
                }
            });
            
            // –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('userAvatar').addEventListener('click', function() {
                document.getElementById('dropdownMenu').classList.toggle('show');
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            window.addEventListener('click', function(e) {
                if (!e.target.matches('.user-avatar')) {
                    const dropdown = document.getElementById('dropdownMenu');
                    if (dropdown.classList.contains('show')) {
                        dropdown.classList.remove('show');
                    }
                }
            });
            
            // –°—Å—ã–ª–∫–∏ –Ω–∞ –ª–∏—á–Ω—ã–µ —Å–ø–∏—Å–∫–∏
            document.getElementById('watchedLink').addEventListener('click', function(e) {
                e.preventDefault();
                if (!currentUser) {
                    showLoginModal();
                    return;
                }
                
                const watchedMovies = moviesData.filter(movie => 
                    currentUser.watched.includes(movie.googleDriveId)
                );
                
                renderMovies(watchedMovies, 'popularMovies');
                document.querySelector('.section-title').innerHTML = `<i class="fas fa-check-circle"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ`;
            });
            
            document.getElementById('watchlistLink').addEventListener('click', function(e) {
                e.preventDefault();
                if (!currentUser) {
                    showLoginModal();
                    return;
                }
                
                const watchlistMovies = moviesData.filter(movie => 
                    currentUser.watchlist.includes(movie.googleDriveId)
                );
                
                renderMovies(watchlistMovies, 'popularMovies');
                document.querySelector('.section-title').innerHTML = `<i class="fas fa-bookmark"></i> –•–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å`;
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–ª–µ–µ—Ä–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    if (document.fullscreenElement) {
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        } else if (document.msExitFullscreen) {
                            document.msExitFullscreen();
                        }
                    } else {
                        closePlayer();
                        closeMovieDetails();
                    }
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–ª–µ–µ—Ä–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏
            document.getElementById('videoPlayer').addEventListener('click', function(e) {
                if (e.target === this) {
                    closePlayer();
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏
            document.getElementById('movieDetails').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeMovieDetails();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–ª–µ–µ—Ä–∞
            document.getElementById('closePlayerBtn').addEventListener('click', closePlayer);
            
            // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞
            document.getElementById('closeDetailsBtn').addEventListener('click', closeMovieDetails);
            
            // –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø–ª–µ–µ—Ä–∞
            document.getElementById('playerFullscreenBtn').addEventListener('click', toggleFullScreen);
            
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            document.getElementById('startWatchingBtn').addEventListener('click', function() {
                if (moviesData.length > 0) {
                    openPlayer(moviesData[0].title, moviesData[0].googleDriveId, moviesData[0].duration);
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ä–æ–±–Ω–µ–µ
            document.getElementById('moreInfoBtn').addEventListener('click', function() {
                if (moviesData.length > 0) {
                    openMovieDetails(moviesData[0]);
                }
            });
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    switchSection(section);
                });
            });
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ —Ñ—É—Ç–µ—Ä–µ
            document.querySelectorAll('.footer-column a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    if (section) {
                        switchSection(section);
                    }
                });
            });
            
            // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            document.getElementById('closeLoginModalBtn').addEventListener('click', function() {
                closeModal('loginModal');
            });
            
            document.getElementById('closeRegisterModalBtn').addEventListener('click', function() {
                closeModal('registerModal');
            });
            
            document.getElementById('showRegisterModalLink').addEventListener('click', function() {
                showRegisterModal();
            });
            
            document.getElementById('showLoginModalLink').addEventListener('click', function() {
                showLoginModal();
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('msfullscreenchange', handleFullscreenChange);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
            document.getElementById('submitComment').addEventListener('click', function() {
                const textarea = document.getElementById('commentText');
                const text = textarea.value.trim();
                
                if (text && currentMovieId) {
                    if (addComment(currentMovieId, text)) {
                        textarea.value = '';
                        loadComments(currentMovieId);
                    }
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            document.getElementById('loginToCommentBtn').addEventListener('click', function() {
                closeMovieDetails();
                showLoginModal();
            });
        });

        // –≠–º—É–ª—è—Ü–∏—è YouTube API
        async function fetchYouTubeVideos(query) {
            console.log(`–ò—â–µ–º –≤–∏–¥–µ–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É: ${query}`);
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const hasExcludedKeywords = EXCLUDED_KEYWORDS.some(keyword => 
                query.toLowerCase().includes(keyword.toLowerCase())
            );
            
            if (hasExcludedKeywords) {
                return [];
            }
            
            const hasIncludedKeywords = INCLUDED_KEYWORDS.some(keyword => 
                query.toLowerCase().includes(keyword.toLowerCase())
            );
            
            if (!hasIncludedKeywords) {
                return [];
            }
            
            return [{
                id: { videoId: 'test_id' },
                snippet: {
                    title: query,
                    description: '–û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞',
                    thumbnails: {
                        high: { url: 'https://via.placeholder.com/300x450/2a2a2a/ffffff?text=–ü–æ—Å—Ç–µ—Ä' }
                    }
                },
                contentDetails: { duration: 'PT2H18M' }
            }];
        }
    </script>
</body>
</html>